---
import RockLayout from './RockLayout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import Player from '../components/Player.astro';

const { title, subtitle, image, color = "#ff0000" } = Astro.props;
---

<RockLayout title={`${title} | El Rock de Todos los Días`}>
    <Header />

    <main class="cat-page">
        <!-- HERO DE SECCIÓN (Homologado con Hero principal) -->
        <header class="cat-hero" style={`background-image: linear-gradient(to top, #000 0%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.5) 100%), url(${image});`}>
            <div class="cat-hero-content">
                <div class="cat-breadcrumb-wrapper">
                    <div class="red-bar-mini"></div>
                    <span class="cat-breadcrumb">EXPLORAR // <span style={`color: ${color}`}>{title}</span></span>
                </div>
                <h1 class="cat-title">{title}</h1>
                <p class="cat-tagline">{subtitle}</p>
            </div>
        </header>

        <div class="cat-container">
            <!-- COLUMNA PRINCIPAL DE NOTICIAS -->
            <section class="cat-main">
                <div class="cat-grid">
                    <slot /> <!-- Aquí entran las NewsCards cuadradas -->
                </div>
            </section>

            <!-- SIDEBAR (Toque editorial) -->
            <aside class="cat-sidebar">
                <div class="sidebar-sticky">
                    <div class="sidebar-header">
                        <div class="red-bar-sidebar"></div>
                        <h3 class="sidebar-title">LO MÁS <span class="red-italic">RUIDOSO</span></h3>
                    </div>
                    
                    <div class="cat-top-list">
                        <div class="cat-item">
                            <span class="cat-num">01</span>
                            <div class="cat-item-info">
                                <span class="cat-category-tiny">ESPECIAL</span>
                                <p>KISS Alive!: 50 años de la leyenda que salvó el rock.</p>
                            </div>
                        </div>
                        <div class="cat-item">
                            <span class="cat-num">02</span>
                            <div class="cat-item-info">
                                <span class="cat-category-tiny">CINE</span>
                                <p>Andor T2: La revolución que Star Wars necesitaba.</p>
                            </div>
                        </div>
                        <div class="cat-item">
                            <span class="cat-num">03</span>
                            <div class="cat-item-info">
                                <span class="cat-category-tiny">LIVE</span>
                                <p>Festivales 2026: La guía definitiva del ruido global.</p>
                            </div>
                        </div>
                    </div>

                    <!-- BOTÓN EXTRA -->
                    <a href="/newsletter" class="sidebar-cta">SUSCRÍBETE AL RUIDO</a>
                </div>
            </aside>
        </div>
    </main>

    <Footer />
    <Player />
</RockLayout>

<style>
    /* AJUSTE PARA HEADER TRIPLE (160px aprox) */
    .cat-page { background: #000; padding-top: 155px; }

    /* HERO DE CATEGORÍA */
    .cat-hero {
        height: 50vh;
        background-size: cover;
        background-position: center;
        display: flex;
        align-items: flex-end;
        padding-bottom: 60px;
        border-bottom: 1px solid #111;
    }
    .cat-hero-content { max-width: 1400px; margin: 0 auto; width: 92%; }
    
    .cat-breadcrumb-wrapper { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
    .red-bar-mini { width: 4px; height: 15px; background: #ff0000; }
    .cat-breadcrumb { font-family: 'Inter'; font-size: 11px; font-weight: 900; letter-spacing: 2px; color: #666; text-transform: uppercase; }

    .cat-title { 
        font-family: 'Bebas Neue'; 
        font-size: clamp(4rem, 10vw, 8rem); 
        line-height: 0.8; 
        margin: 5px 0 20px 0; 
        color: white;
        text-transform: uppercase;
        font-style: italic; /* Toque homologado con Hero */
    }
    .cat-tagline { font-family: 'Inter'; font-size: 1rem; color: #888; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; max-width: 600px; }

    /* LAYOUT DE CONTENIDO */
    .cat-container {
        max-width: 1400px;
        margin: 0 auto;
        display: grid;
        grid-template-columns: 1fr 320px;
        gap: 50px;
        padding: 80px 4%;
    }

    /* GRID DE NOTICIAS (Aquí es donde se ven pequeñas y cuadradas) */
    .cat-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr); /* 3 columnas junto al sidebar se ve Pro */
        gap: 40px 25px;
    }

    /* SIDEBAR */
    .sidebar-sticky { position: sticky; top: 180px; }
    .sidebar-header { display: flex; align-items: center; gap: 12px; margin-bottom: 30px; }
    .red-bar-sidebar { width: 4px; height: 25px; background: #ff0000; }
    .sidebar-title { font-family: 'Bebas Neue'; font-size: 1.8rem; color: white; margin: 0; }
    .red-italic { color: #ff0000; font-style: italic; }

    .cat-item { display: flex; gap: 15px; margin-bottom: 25px; padding-bottom: 20px; border-bottom: 1px solid #111; }
    .cat-num { font-family: 'Bebas Neue'; font-size: 2.2rem; color: #1a1a1a; line-height: 1; }
    .cat-category-tiny { font-family: 'Inter'; font-size: 9px; font-weight: 900; color: #ff0000; display: block; margin-bottom: 5px; }
    .cat-item p { font-family: 'Inter'; font-size: 0.9rem; font-weight: 700; color: #ccc; line-height: 1.3; }

    .sidebar-cta {
        display: block;
        background: #111;
        color: white;
        text-align: center;
        padding: 15px;
        font-family: 'Inter';
        font-size: 11px;
        font-weight: 900;
        text-decoration: none;
        letter-spacing: 1px;
        border: 1px solid #222;
        margin-top: 40px;
        transition: 0.3s;
    }
    .sidebar-cta:hover { background: #ff0000; border-color: #ff0000; }

    /* RESPONSIVO */
    @media (max-width: 1200px) {
        .cat-grid { grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width: 1024px) {
        .cat-container { grid-template-columns: 1fr; }
        .cat-sidebar { display: none; }
        .cat-title { font-size: 5rem; }
    }
    @media (max-width: 600px) {
        .cat-grid { grid-template-columns: 1fr; }
    }
</style>